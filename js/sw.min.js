var refreshing;"serviceWorker"in navigator&&(navigator.serviceWorker.controller?console.log("An active service worker found, no need to register"):(navigator.serviceWorker.register("/serviceworker.js").then(function(e){if(console.log("Service worker has been registered for scope: "+e.scope),navigator.serviceWorker.controller)return e.installing?(console.log("Service worker installing"),void trackInstalling(e.installing)):e.waiting?(console.log("Service worker installed"),void updateReady(e.waiting)):void(e.active&&console.log("Service worker active"))},function(e){console.log("ServiceWorker registration failed: ",e)}),navigator.serviceWorker.addEventListener("controllerchange",function(){refreshing||(console.log("Refreshing !"),window.location.reload(),refreshing=!0)})));function trackInstalling(e){e.addEventListener("statechange",function(){"installed"==e.state&&updateReady(e)})}function updateReady(e){console.log("New version available"),confirm("New version available, press OK to reload the website")?e.postMessage({action:"skipWaiting"}):alert("Why did you press cancel? You should have confirmed")}
